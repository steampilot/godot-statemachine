[gd_scene load_steps=3 format=3 uid="uid://b7p2kq8vn4dax"]

[ext_resource type="Script" path="res://Scripts/head_rotation_parallax.gd" id="1_parallax"]

[sub_resource type="PlaceholderTexture2D" id="PlaceholderTexture2D_1"]
size = Vector2(128, 128)

[node name="ParallaxRotationTest" type="Node2D"]

[node name="CapricaHead" type="Sprite2D" parent="."]
texture = SubResource("PlaceholderTexture2D_1")
script = ExtResource("1_parallax")

[node name="Camera2D" type="Camera2D" parent="."]

[node name="UI" type="CanvasLayer" parent="."]

[node name="Instructions" type="Label" parent="UI"]
offset_left = 10.0
offset_top = 10.0
offset_right = 700.0
offset_bottom = 150.0
theme_override_colors/font_color = Color(1, 1, 0, 1)
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_constants/outline_size = 2
text = "PARALLAX OCCLUSION MAPPING - Head Rotation

1. Assign textures: center, left, right sprites
2. Assign NORMAL MAP with depth info (alpha channel = height)
3. Rotation shifts pixels based on depth â†’ pseudo-3D
4. Adjust parallax_strength for effect intensity"

[node name="Controls" type="VBoxContainer" parent="UI"]
offset_left = 10.0
offset_top = 160.0
offset_right = 500.0
offset_bottom = 400.0

[node name="AutoRotateLabel" type="Label" parent="UI/Controls"]
layout_mode = 2
text = "Auto Rotate:"

[node name="AutoCheckbox" type="CheckBox" parent="UI/Controls"]
layout_mode = 2
button_pressed = true

[node name="RotationLabel" type="Label" parent="UI/Controls"]
layout_mode = 2
text = "Rotation (-1=Left, 0=Center, 1=Right):"

[node name="RotationSlider" type="HSlider" parent="UI/Controls"]
layout_mode = 2
min_value = -1.0
max_value = 1.0
step = 0.01
value = 0.0

[node name="ParallaxStrengthLabel" type="Label" parent="UI/Controls"]
layout_mode = 2
text = "Parallax Strength:"

[node name="ParallaxStrengthSlider" type="HSlider" parent="UI/Controls"]
layout_mode = 2
min_value = 0.0
max_value = 0.1
step = 0.001
value = 0.02

[node name="SamplesLabel" type="Label" parent="UI/Controls"]
layout_mode = 2
text = "Quality (Samples):"

[node name="SamplesSlider" type="HSlider" parent="UI/Controls"]
layout_mode = 2
min_value = 4.0
max_value = 32.0
step = 1.0
value = 16.0

[node name="BlendThresholdLabel" type="Label" parent="UI/Controls"]
layout_mode = 2
text = "Side Blend Threshold:"

[node name="BlendThresholdSlider" type="HSlider" parent="UI/Controls"]
layout_mode = 2
min_value = 0.3
max_value = 0.9
step = 0.01
value = 0.6

[connection signal="toggled" from="UI/Controls/AutoCheckbox" to="CapricaHead" method="set" binds= ["auto_rotate"]]
[connection signal="value_changed" from="UI/Controls/RotationSlider" to="CapricaHead" method="set" binds= ["rotation_angle"]]
[connection signal="value_changed" from="UI/Controls/ParallaxStrengthSlider" to="CapricaHead" method="set" binds= ["parallax_strength"]]
[connection signal="value_changed" from="UI/Controls/SamplesSlider" to="CapricaHead" method="set" binds= ["parallax_samples"]]
[connection signal="value_changed" from="UI/Controls/BlendThresholdSlider" to="CapricaHead" method="set" binds= ["side_blend_threshold"]]
